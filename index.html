<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KOOBERA - Quantum Financial Analysis Platform</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js"></script>
  <style>
    /* Keep your original styles */
    :root {
      --primary: #0a0a1a;
      --secondary: #0f1538;
      --accent: #1a237e;
      --quantum: #00e5ff;
      --highlight: #7c4dff;
      --success: #00e676;
      --warning: #ffeb3b;
      --danger: #ff1744;
      --text: #e0e0e0;
      --card-bg: rgba(26, 35, 126, 0.2);
      --glow: 0 0 10px rgba(124, 77, 255, 0.7);
    }
    body {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
    }
    .container {
      max-width: 1600px;
      margin: 0 auto;
    }

    /* ---------- LOGIN FORM STYLES ---------- */
    #loginScreen {
      max-width: 400px;
      margin: 100px auto;
      padding: 30px;
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--glow);
      backdrop-filter: blur(8px);
    }
    #loginScreen h2 {
      text-align: center;
      margin-bottom: 20px;
      color: var(--quantum);
    }
    #loginForm input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid rgba(124, 77, 255, 0.5);
      background: rgba(10, 10, 26, 0.7);
      color: var(--text);
      font-size: 1rem;
    }
    #loginForm button {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      background: linear-gradient(135deg, var(--highlight), var(--quantum));
      color: white;
      cursor: pointer;
      margin-top: 10px;
    }
    #logoutBtn {
      background: rgba(255,255,255,0.1);
      border: none;
      color: var(--text);
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
    }
    #logoutBtn:hover {
      background: rgba(255,255,255,0.2);
    }
  </style>
</head>
<body>
  <!-- LOGIN SCREEN -->
  <div id="loginScreen">
    <h2>Login to KOOBERA</h2>
    <form id="loginForm">
      <input type="email" id="email" placeholder="Email" required>
      <input type="password" id="password" placeholder="Password" required>
      <button type="submit">Login</button>
    </form>
    <p id="loginError" style="color:red; margin-top:10px;"></p>
  </div>

  <!-- DASHBOARD SCREEN (hidden until login) -->
  <div id="dashboard" style="display:none;">
    <div class="container">
      <header>
        <div class="logo">
          <div class="logo-icon"><i class="fas fa-atom"></i></div>
          <div>
            <h1>KOOBERA</h1>
            <div class="tagline">Ultimate Predictive Trading System</div>
          </div>
        </div>
        <div class="user-info">
          <div class="user-avatar"><i class="fas fa-user-secret"></i></div>
          <div>
            <div id="userEmail">Logged in</div>
            <div class="market-status">
              <div class="status-indicator status-open"></div>
              <span>NSE & BSE Open</span>
            </div>
          </div>
          <button id="logoutBtn">Logout</button>
        </div>
      </header>

      <!-- === Your ORIGINAL DASHBOARD CONTENT STARTS HERE === -->
      <!-- I’m not rewriting everything, I’m keeping all your KOOBERA code intact -->
      <!-- (control panel, charts, methodology, results, alerts, footer etc.) -->
      <!-- Just paste your original dashboard HTML inside this #dashboard div -->
      <!-- For brevity, I'm indicating it as ... below -->

      <!-- === PASTE YOUR ORIGINAL DASHBOARD HTML HERE === -->
    </div>
  </div>

  <!-- FIREBASE CONFIG + LOGIN SCRIPT -->
  <script>
    // Your Firebase Config (replace with your actual values)
    const firebaseConfig = {
      apiKey: "AIzaSyBIKa4CwfDeE7juzMtiKeIx8mC8YJH5Qn0",
      authDomain: "toptter-trading.firebaseapp.com",
      projectId: "toptter-trading",
      storageBucket: "toptter-trading.appspot.com",
      messagingSenderId: "747829253190",
      appId: "1:747829253190:web:ccce57e5ea5d3f6be36647"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const loginScreen = document.getElementById('loginScreen');
    const dashboard = document.getElementById('dashboard');
    const loginForm = document.getElementById('loginForm');
    const loginError = document.getElementById('loginError');
    const userEmail = document.getElementById('userEmail');
    const logoutBtn = document.getElementById('logoutBtn');

    // Login form submit
    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          loginError.textContent = "";
        })
        .catch((error) => {
          loginError.textContent = error.message;
        });
    });

    // Auth state listener
    auth.onAuthStateChanged(user => {
      if (user) {
        loginScreen.style.display = 'none';
        dashboard.style.display = 'block';
        userEmail.textContent = user.email;
      } else {
        loginScreen.style.display = 'block';
        dashboard.style.display = 'none';
      }
    });

    // Logout
    logoutBtn.addEventListener('click', () => {
      auth.signOut();
    });
  </script>
</body>
</html>
